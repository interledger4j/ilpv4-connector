# Test settings to validate loading configuration properties.
ilpv4:
  connector:
    ## ILP address of the connector.
    ## This property can be omitted if an account with relation=parent is configured under accounts.
    nodeIlpAddress: test.example
    # The global prefix. For production environments, this should be `g`. For test environments, consider `test`.
    globalPrefix: test
    btp.enabled: true
    jwtTokenIssuer: https://example.com
    # Which features are enabled.
    enabledFeatures:
      rateLimitingEnabled: true
    # Which protocols this Connector supports
    enabledProtocols:
      blastEnabled: true
      pingProtocolEnabled: true
      peerConfigEnabled: true
      peerRoutingEnabled: true
      ildcpEnabled: true
    # Global Routing Settings for this connector.
    globalRoutingSettings:
      # Whether to broadcast known routes.
      routeBroadcastEnabled: true
      # Determines if the parent-account should be used as the default route. This value overrides any specified
      # `defaultRoute` value.
      useParentForDefaultRoute: true
      # Which account should be used as the default route for all un-routed traffic. If empty, the default route is
      # disabled.
      defaultRoute: self.internal
      # Seed used for generating routing table auth values.
      routingSecret: shh
      # Frequency at which the connector broadcasts its routes to adjacent connectors. (in milliseconds)
      routeBroadcastInterval: 30001
      # The frequency at which the connector checks for expired routes. (in milliseconds)
      routeCleanupInterval: 30002
      # The maximum age of a route provided by this connector. (in milliseconds)
      routeExpiry: 30003
      # The maximum number of epochs per routing table update.
      maxEpochsPerRoutingTable: 77
      # Static Routes
      staticRoutes:
        # ILP address prefix that this static route applies to. Configured routes take precedence over the same or
        # shorter prefixes that are local or published by peers. More specific prefixes will still take precedence.
        # NOTE: Prefixes should NOT include a trailing period.
        - targetPrefix: test.parent
          # ID of the account that destinations matching `targetPrefix` should be forwarded to. Must be one of the
          # accounts in `accounts`.
          peerAccountId: bob
    # Bilateral Connections that support only a single account.
    accounts:
      - id: alice
        description: Alice's USD Account
        # The default relationship-type that this connector should view an account as.
        relationship: PARENT
        # Type of the Link that should be used for this account.
        linkType: Loopback # capitalization is purposeful for testing
        # Currency code or other asset identifier that will be used to select the correct rate for this account.
        assetCode: USD
        # Interledger amounts are integers, but most currencies are typically represented as
        # fractional units, e.g. cents. This property defines how many Interledger units make
        # up one regular unit. For dollars, this would usually be set to 9, so that Interledger
        # amounts are expressed in nano-dollars.
        assetScale: 8
        # Optional. Maximum amount per packet for incoming prepare packets. ILPv4Connector will reject
        # any incoming prepare packets from this account with a higher amount. Amount should be
        # provided as an integer in a string (in atomic units).
        maximumPacketAmount: 100001
        # RateLimit Settings
        rateLimitSettings:
          # Optioanl. Maximum rate of incoming packets.
          maxPacketsPerSecond: 5000
        # Balance Settings
        balanceSettings:
          # Optional. Minimum balance (in this account's indivisible base units) the connector
          # must maintain. The connector will reject outgoing packets if they would putEntry it below
          # this balance. The format is a string containing an integer (which may be prefixed with
          # - to indicate a negative value).
          minBalance: 1
          # Maximum balance (in this account's indivisible base units) the connector will allow.
          # The connector will reject incoming packets if they would putEntry it above this balance.
          # The format is a string containing an integer (which may be prefixed with - to indicate
          # a negative value).
          maxBalance: 2
          # Optional Balance (in this account's indivisible base units) numerically below which
          # the connector will automatically initiate a settlement. The format is a string
          # containing an integer (which may be prefixed with - to indicate a negative value).
          settleThreshold: 10000001
          # Optional Balance (in this account's indivisible base units) the connector will attempt to reach when settling.
          settleTo: 3
        # Whether we should broadcast routes to this peer. Defaults to false for relation=child and true otherwise.
        sendRoutes: false
        # Whether we should receive and process route broadcasts from this peer. Defaults to false for relation=child and true otherwise.
        receiveRoutes: false
        customSettings:
          foo: bar
          boo: baz
      - id: bob
        description: Bob's EUR Account
        # The default relationship-type that this connector should view an account as.
        relationship: PEER
        # Type of the Link that should be used for this account.
        linkType: LOOPBACK # capitalization is purposeful for testing
        # Currency code or other asset identifier that will be used to select the correct rate for this account.
        assetCode: EUR
        # Interledger amounts are integers, but most currencies are typically represented as
        # fractional units, e.g. cents. This property defines how many Interledger units make
        # up one regular unit. For dollars, this would usually be set to 9, so that Interledger
        # amounts are expressed in nano-dollars.
        assetScale: 3
        # Optional. Maximum amount per packet for incoming prepare packets. ILPv4Connector will reject
        # any incoming prepare packets from this account with a higher amount. Amount should be
        # provided as an integer in a string (in atomic units).
        maximumPacketAmount: 100002
        # RateLimit Settings
        rateLimitSettings:
          maxPacketsPerSecond: 1
        # Balance Settings
        balanceSettings:
          # Optional. Minimum balance (in this account's indivisible base units) the connector
          # must maintain. The connector will reject outgoing packets if they would putEntry it below
          # this balance. The format is a string containing an integer (which may be prefixed with
          # - to indicate a negative value).
          minBalance: -7
          # Maximum balance (in this account's indivisible base units) the connector will allow.
          # The connector will reject incoming packets if they would putEntry it above this balance.
          # The format is a string containing an integer (which may be prefixed with - to indicate
          # a negative value).
          maxBalance: -3
          # Optional Balance (in this account's indivisible base units) numerically below which
          # the connector will automatically initiate a settlement. The format is a string
          # containing an integer (which may be prefixed with - to indicate a negative value).
          settleThreshold: -10000001
          # Optional Balance (in this account's indivisible base units) the connector will attempt to reach when settling.
          settleTo: 54
        # Whether we should broadcast routes to this peer. Defaults to false for relation=child and true otherwise.
        sendRoutes: true
        # Whether we should receive and process route broadcasts from this peer. Defaults to false for relation=child and true otherwise.
        receiveRoutes: true
        customSettings:
          foo: bar1
          boo: baz1
      - id: empty
      - id: minimal.child # just a string, not an address or prefix.
        description: A child account with minimal settings.
        # The default relationship-type that this connector should view an account as.
        relationship: CHILD
        # Type of the Link that should be used for this account.
        linkType: loopback # capitalization is purposeful for testing
        # Currency code or other asset identifier that will be used to select the correct rate for this account.
        assetCode: USD
        # Interledger amounts are integers, but most currencies are typically represented as
        # fractional units, e.g. cents. This property defines how many Interledger units make
        # up one regular unit. For dollars, this would usually be set to 9, so that Interledger
        # amounts are expressed in nano-dollars.
        assetScale: 9
    accountProviders:
      - id: testServer1
        description: The testServer1 AccountProvider
        # The default relationship-type that this connector should view an account as.
        relationship: PEER
        # Type of the Link that should be used for this account.
        linkType: LOOPBACK # capitalization is purposeful for testing
        # Currency code or other asset identifier that will be used to select the correct rate for this account.
        assetCode: USD
        # Interledger amounts are integers, but most currencies are typically represented as
        # fractional units, e.g. cents. This property defines how many Interledger units make
        # up one regular unit. For dollars, this would usually be set to 9, so that Interledger
        # amounts are expressed in nano-dollars.
        assetScale: 8
        # Optional. Maximum amount per packet for incoming prepare packets. ILPv4Connector will reject
        # any incoming prepare packets from this account with a higher amount. Amount should be
        # provided as an integer in a string (in atomic units).
        maximumPacketAmount: 100001
        # RateLimit Settings
        rateLimitSettings:
          maxPacketsPerSecond: 5000
        # Balance Settings
        balanceSettings:
          # Optional. Minimum balance (in this account's indivisible base units) the connector
          # must maintain. The connector will reject outgoing packets if they would putEntry it below
          # this balance. The format is a string containing an integer (which may be prefixed with
          # - to indicate a negative value).
          minBalance: 1
          # Maximum balance (in this account's indivisible base units) the connector will allow.
          # The connector will reject incoming packets if they would putEntry it above this balance.
          # The format is a string containing an integer (which may be prefixed with - to indicate
          # a negative value).
          maxBalance: 2
          # Optional Balance (in this account's indivisible base units) numerically below which
          # the connector will automatically initiate a settlement. The format is a string
          # containing an integer (which may be prefixed with - to indicate a negative value).
          settleThreshold: 10000001
          # Optional Balance (in this account's indivisible base units) the connector will attempt to reach when settling.
          settleTo: 3
        # Whether we should broadcast routes to this peer. Defaults to false for relation=child and true otherwise.
        sendRoutes: false
        # Whether we should receive and process route broadcasts from this peer. Defaults to false for relation=child and true otherwise.
        receiveRoutes: false
        customSettings:
          foo: bar
          boo: baz
      - id: empty
      - id: minimal.parent # just a string, not an address or prefix.
        description: The minimal.parent AccountProvider
        # The default relationship-type that this connector should view an account as.
        relationship: PARENT
        # Type of the Link that should be used for this account.
        linkType: LoopbacK # capitalization is purposeful for testing
        # Currency code or other asset identifier that will be used to select the correct rate for this account.
        assetCode: USD
        # Interledger amounts are integers, but most currencies are typically represented as
        # fractional units, e.g. cents. This property defines how many Interledger units make
        # up one regular unit. For dollars, this would usually be set to 9, so that Interledger
        # amounts are expressed in nano-dollars.
        assetScale: 9